<html>
<meta charset="UTF-8">
<script>

    // var xmlhttp = new XMLHttpRequest();
    // var url = 'http://folk.ntnu.no/adrianto/insertIntoDB.php/';
 

    function insertUserIntoDB() {

        var user_name = document.getElementById("user_name").value;
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;    
        xmlhttp.open('POST', url, true);
     
        xmlhttp.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
     
        xmlhttp.onreadystatechange = function()
        {
          if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
          {
            // Denne koden kalles når xmlhttp.send() er ferdig med å jobbe. Dette er en sånn fancy callback-funksjon.
            // Hvis fila "insertIntoDB.php" skriver ut noe etter at den er ferdig med å oppdatere databasen, kan dere lese ut det her f.eks.
            // Men dere trenger i utgangspunktet ikke å gjøre noe her.
          }
        }
     
        var user = {
            'table': 'public.user',
            'user': [
                {
                    'column': 'user_id',
                    'data': "DEFAULT"
                },
                {
                    'column': 'user_name',
                    'data': user_name
                },
                {
                    'column': 'email',
                    'data': email
                },
                {
                    'column': 'current_location',
                    'data': null
                },
                {
                    'column': 'password',
                    'data': password
                },
                {
                    'column': 'geomessage',
                    'data': null
                }
            ]
        };
        // var usertext = JSON.stringify(user)
        // document.getElementById("uservalues").innerHTML=usertext;
        // xmlhttp.send(usertext);  
    }
    <?php
        $conn = pg_connect("host=92.62.34.78 port=5432 dbname=adrianto user=adrianto password=kalende");
        pg_set_error_verbosity($conn, PGSQL_ERRORS_VERBOSE);
        
        if ($conn === false) {
            echo "An error occurred connecting to the database.\n";
            var_dump(pg_last_error($conn));
        exit;
        }
        
        $json_object = json_decode($input);

        $array = array();

        $table = $json_object->table;
        foreach ($json_object->user as $column)
        {
            $array[$column->column] = $column->data;
        }
        echo implode("|",$array);
        pg_insert($conn, $table, $array);
    ?>
</script>
<body>
    <h1>Opprett ny bruker</h1>
    <p>Username</p>
    <input id="user_name"><br />
    <p>Email</p>
    <input id="email"><br />
    <p>Password</p>
    <input id="password"><br />
    <button type="button" onclick="insertUserIntoDB()">Trykk her for å opprette bruker!</button>
    <p id="uservalues">Ingen bruker opprettet enda</p>
</body>
</html>