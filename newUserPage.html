<html>
<meta charset="UTF-8">
<script>

    var xmlhttp = new XMLHttpRequest();
    var url = 'http://folk.ntnu.no/adrianto/insertIntoDB.php';
 
    var user_name = "adriantre";
    var email = "adriantre@stud.ntnu.no";
    var password = "password";     

    function insertUserIntoDB() {
        xmlhttp.open('POST', url, true);
     
        xmlhttp.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
     
        xmlhttp.onreadystatechange = function()
        {
          if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
          {
            // Denne koden kalles når xmlhttp.send() er ferdig med å jobbe. Dette er en sånn fancy callback-funksjon.
            // Hvis fila "insertIntoDB.php" skriver ut noe etter at den er ferdig med å oppdatere databasen, kan dere lese ut det her f.eks.
            // Men dere trenger i utgangspunktet ikke å gjøre noe her.
          }
        }
     
        var user = {
            'table': 'public.user',
            'user': [
                {
                    'column': 'user_id',
                    'data': "DEFAULT"
                },
                {
                    'column': 'user_name',
                    'data': user_name
                },
                {
                    'column': 'email',
                    'data': email
                },
                {
                    'column': 'current_location',
                    'data': null
                },
                {
                    'column': 'password',
                    'data': password
                },
                {
                    'column': 'geomessage',
                    'data': null
                }
            ]
        };
        var usertext = JSON.stringify(user)
        getElementById('uservalues').innerHTML=usertext;
        xmlhttp.send(usertext);
    }
</script>
<body>
    <p id="uservalues">Opprett ny bruker:</p>
    <button type="button" onclick="insertUserIntoDB()">Trykk her for å oprette bruker!</button>
</body>
</html>