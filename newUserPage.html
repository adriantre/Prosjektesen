<!DOCTYPE html>
<html lang="en">
<head>
    <title>Geofriends</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.min.js"></script>
    
    <script src="bootstrap/js/bootstrap.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="bootstrap/js/npm.js"></script>
    <style>
    .jumbotron {
      background-color: #f4511e;
      color: #fff;
    }
    </style>
</head>
<script>

    function insertUserIntoDB() {

        var xmlhttp = new XMLHttpRequest();
        var url = 'http://folk.ntnu.no/adrianto/prosjektesen/insertIntoDB.php/';
        var user_name = document.getElementById("user_name").value;
        var email = document.getElementById("email").value;
        var password = document.getElementById("pwd").value;    
        xmlhttp.open('POST', url, true);
     
        xmlhttp.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
     
        xmlhttp.onreadystatechange = function()
        {
          if (xmlhttp.readyState == 4 && xmlhttp.status == 200)
          {
            document.getElementById("uservalues").innerHTML = xmlhttp.responseText;
            // Denne koden kalles når xmlhttp.send() er ferdig med å jobbe. Dette er en sånn fancy callback-funksjon.
            // Hvis fila "insertIntoDB.php" skriver ut noe etter at den er ferdig med å oppdatere databasen, kan dere lese ut det her f.eks.
            // Men dere trenger i utgangspunktet ikke å gjøre noe her.
          }
        }
        
     
        var user = {
            'sqlopt': 'insert',
            'table': 'public.user',
            'data': [
                {
                    'column': 'user_name',
                    'data': user_name
                },
                {
                    'column': 'email',
                    'data': email
                },
                {
                    'column': 'current_location_id',
                    'data': null
                },
                {
                    'column': 'password',
                    'data': password
                },
                {
                    'column': 'geomessage',
                    'data': null
                }
            ]
        };
        var usertext = JSON.stringify(user);
        document.getElementById("uservalues").innerHTML=usertext;
        xmlhttp.send(usertext);

    }
    function proceedtoMap(){
        alert("Dette funka");

    }
</script>
<body>
<!--     <h1>Opprett ny bruker</h1>
    <p>Username</p>
    <input id="user_name"><br />
    <p>Email</p>
    <input id="email"><br />
    <p>Password</p>
    <input id="password"><br />
    <button type="button" onclick="insertUserIntoDB()">Trykk her for å opprette bruker!</button>
    <p id="uservalues">Ingen bruker opprettet enda</p><br />
    <p id="txtHint"></p>
    <button type="button" onclick=window.open('http://folk.ntnu.no/adrianto/prosjektesen/mapPage.html',"_self","","")>Til Hovedmeny!</button>
 -->
<div class="jumbotron text-center">
  <h1>Geofriends</h1> 
  <p>We make your maps friendly</p> 
</div>

<div class="container">
  <h2>Create user</h2>
  <form class="form-horizontal" role="form">
    <div class="form-group">
      <label class="control-label col-sm-2" for="user_name">Username:</label>
      <div class="col-sm-10">
        <input type="user_name" class="form-control" id="user_name" placeholder="Enter username">
      </div>
    </div>            
    <div class="form-group">
      <label class="control-label col-sm-2" for="email">Email:</label>
      <div class="col-sm-10">
        <input type="email" class="form-control" id="email" placeholder="Enter email">
      </div>
    </div>
    <div class="form-group">
      <label class="control-label col-sm-2" for="pwd">Password:</label>
      <div class="col-sm-10">          
        <input type="password" class="form-control" id="pwd" placeholder="Enter password">
      </div>
    </div>
    <div class="form-group">        
      <div class="col-sm-offset-2 col-sm-10">
        <button type="button" class="btn btn-default" onclick="insertUserIntoDB()">Submit</button>
      </div>
    </div>
    <p id="uservalues">Ingen bruker opprettet enda</p><br/>
  </form>
</div>
</body> 
</html>